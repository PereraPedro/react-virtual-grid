{"version":3,"sources":["../src/grid.jsx"],"names":["Grid","props","bindRoot","node","_root","bindScrollOverlay","_scrollOverlay","bindScrollInner","_scrollInner","bindLeftPane","_leftPane","bindLeftPaneHeader","_leftPaneHeader","bindLeftPaneFooter","_leftPaneFooter","bindLeftPaneBody","_leftPaneBody","bindRightPane","_rightPane","bindRightPaneHeader","_rightPaneHeader","bindRightPaneFooter","_rightPaneFooter","bindRightPaneBody","_rightPaneBody","bindCenterPane","_centerPane","bindCenterPaneHeader","_centerPaneHeader","bindCenterPaneFooter","_centerPaneFooter","bindCenterPaneBody","_centerPaneBody","handleResize","event","update","scrollTop","scrollLeft","handleScroll","onScroll","handleScrollStart","_scrolling","onScrollStart","handleScrollEnd","onScrollEnd","handleColumnResizeStart","column","width","_resizingColumn","invalidateSizes","refresh","handleColumnResize","_pinnedColumnWidths","Math","min","max","handleColumnResizeEnd","handleRowResizeStart","row","height","_resizingRow","handleRowResize","_pinnedRowHeights","handleRowResizeEnd","force","calculateRowHeight","rowHeight","calculateColumnWidth","columnWidth","_sizeDetector","strategy","state","componentDidMount","listenTo","scrollOptions","disableMouse","bounce","scrollX","freeScroll","scrollbars","probeType","mouseWheel","preventDefault","interactiveScrollbars","_scroller","on","componentWillUnmount","uninstall","off","destroy","render","styles","contentStyle","scrollContent","position","scrollableWidth","scrollableHeight","container","scrollOverlay","scrollContainer","gridBody","renderLeftPane","renderRightPane","renderCenterPane","renderColumnResizeGuide","renderRowResizeGuide","attrs","pane","left","fixedLeftColumnsWidth","renderLeftPaneHeader","renderLeftPaneFooter","renderLeftPaneBody","cells","fixedLeftColumnCount","top","right","fixedHeadersHeight","leftPaneHeaderContent","renderCellRange","fixedHeaderCount","topLeftRows","topLeftColumns","fixedFooterCount","bottom","fixedFootersHeight","fromRow","rowCount","toRow","leftPaneFooterContent","bottomLeftRows","bottomLeftColumns","estimatedColumnWidth","estimatedRowHeight","translatedPane","leftRows","length","leftPaneBodyContent","leftColumns","fixedRightColumnCount","fixedRightColumnsWidth","renderRightPaneHeader","renderRightPaneFooter","renderRightPaneBody","fromColumn","columnCount","toColumn","rightPaneHeaderContent","topRightRows","topRightColumns","rightPaneFooterContent","bottomRightRows","bottomRightColumns","rightPaneBodyContent","rightRows","rightColumns","renderCenterPaneHeader","renderCenterPaneFooter","renderCenterPaneBody","overflow","topColumns","centerPaneHeaderContent","topRows","bottomColumns","bottomRows","rows","columns","centerPaneBodyContent","find","cell","guideStyle","columnResizeGuide","rowResizeGuide","calculator","invalidate","x","preloadPixelsX","y","preloadPixelsY","bounds","clientWidth","clientHeight","cellsWithinBounds","changed","onExtentsChange","setState","setScroll","_lastScrollableWidth","_lastScrollableHeight","setTimeout","childNodes","style","offsetHeight","offsetWidth","renderCell","visibleRowIndex","visibleColumnIndex","rowData","columnData","push","lastColumn","lastRow","lastTopLeftRow","topOffset","lastBottomRow","lastBottomRowTop","lastOffset","_calculator","Component","propTypes","PropTypes","number","isRequired","oneOfType","func","object","defaultProps","backgroundColor","cursor","borderRadius"],"mappings":"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","file":"grid.js","sourcesContent":["import React from 'react';\nimport cx from 'classnames';\nimport GridCalculator from './grid-calculator';\nimport elementResizeDetector from 'element-resize-detector';\nimport IScroll from 'iscroll/build/iscroll-probe';\n\nexport default class Grid extends React.Component {\n  static propTypes = {\n    preloadPixelsX: React.PropTypes.number,\n\n    preloadPixelsY: React.PropTypes.number,\n\n    estimatedRowHeight: React.PropTypes.number,\n\n    estimatedColumnWidth: React.PropTypes.number,\n\n    columnCount: React.PropTypes.number.isRequired,\n\n    rowCount: React.PropTypes.number.isRequired,\n\n    fixedLeftColumnCount: React.PropTypes.number,\n\n    fixedRightColumnCount: React.PropTypes.number,\n\n    fixedHeaderCount: React.PropTypes.number,\n\n    fixedFooterCount: React.PropTypes.number,\n\n    columnWidth: React.PropTypes.oneOfType([ React.PropTypes.number, React.PropTypes.func ]),\n\n    rowHeight: React.PropTypes.oneOfType([ React.PropTypes.number, React.PropTypes.func ]),\n\n    renderCell: React.PropTypes.func,\n\n    onExtentsChange: React.PropTypes.func,\n\n    onScrollStart: React.PropTypes.func,\n\n    onScroll: React.PropTypes.func,\n\n    onScrollEnd: React.PropTypes.func,\n\n    scrollOptions: React.PropTypes.object\n  };\n\n  static defaultProps = {\n    preloadPixelsX: 0,\n    preloadPixelsY: 0,\n    fixedLeftColumnCount: 0,\n    fixedRightColumnCount: 0,\n    fixedHeaderCount: 0,\n    fixedFooterCount: 0,\n    estimatedColumnWidth: 130,\n    estimatedRowHeight: 30\n  };\n\n  constructor(props) {\n    super(props);\n\n    this._scrolling = false;\n\n    this._pinnedColumnWidths = {};\n    this._pinnedRowHeights = {};\n\n    this._sizeDetector = elementResizeDetector({strategy: 'scroll'});\n\n    this.state = {};\n  }\n\n  componentDidMount() {\n    this._sizeDetector.listenTo(this._root, this.handleResize);\n\n    this.update(0, 0);\n\n    const scrollOptions = {\n      disableMouse: true,\n      bounce: false, // disable bounce because we're already customizing positioning\n      scrollX: true,\n      freeScroll: true,\n      scrollbars: true,\n      probeType: 3,\n      mouseWheel: true,\n      preventDefault: false,\n      interactiveScrollbars: true,\n      ...this.props.scrollOptions\n    };\n\n    this._scroller = new IScroll(this._scrollInner, scrollOptions);\n    this._scroller.on('scroll', this.handleScroll);\n    this._scroller.on('scrollStart', this.handleScrollStart);\n    this._scroller.on('scrollEnd', this.handleScrollEnd);\n  }\n\n  componentWillUnmount() {\n    this._sizeDetector.uninstall(this._root);\n\n    this._scroller.off('scroll', this.handleScroll);\n    this._scroller.off('scrollStart', this.handleScrollStart);\n    this._scroller.off('scrollEnd', this.handleScrollEnd);\n    this._scroller.destroy();\n  }\n\n  render() {\n    const {styles} = Grid;\n\n    const contentStyle = {\n      ...styles.scrollContent,\n      position: 'absolute',\n      width: this.scrollableWidth,\n      height: this.scrollableHeight\n    };\n\n    return (\n      <div style={styles.container}\n           ref={this.bindRoot}>\n        <div style={styles.scrollOverlay}\n             ref={this.bindScrollOverlay}>\n          <div className=\"scroll-inner\"\n               style={styles.scrollContainer}\n               ref={this.bindScrollInner}>\n            <div className={cx('scroll-container')}\n                 style={contentStyle}>\n              <div style={styles.gridBody}>\n                {this.renderLeftPane()}\n                {this.renderRightPane()}\n                {this.renderCenterPane()}\n                {this.renderColumnResizeGuide()}\n                {this.renderRowResizeGuide()}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  renderLeftPane() {\n    const {styles} = Grid;\n\n    const attrs = {\n      ...styles.pane,\n      left: 0,\n      width: this.fixedLeftColumnsWidth\n    };\n\n    return (\n      <div ref={this.bindLeftPane}\n           className={cx('left-pane')}\n           style={attrs}>\n        {this.renderLeftPaneHeader()}\n        {this.renderLeftPaneFooter()}\n        {this.renderLeftPaneBody()}\n      </div>\n    );\n  }\n\n  renderLeftPaneHeader() {\n    if (!this.state.cells || this.props.fixedLeftColumnCount < 1) {\n      return null;\n    }\n\n    const {styles} = Grid;\n\n    const attrs = {\n      ...styles.pane,\n      left: 0,\n      top: 0,\n      right: 0,\n      height: this.fixedHeadersHeight\n    };\n\n    const contentStyle = {\n    };\n\n    return (\n      <div ref={this.bindLeftPaneHeader}\n           className={cx('left-pane-header')}\n           style={attrs}>\n        <div className={cx(styles.leftPaneHeaderContent)}\n             style={contentStyle}>\n          {this.renderCellRange(0, this.props.fixedHeaderCount - 1, 0, this.props.fixedLeftColumnCount - 1, this.state.cells.topLeftRows, this.state.cells.topLeftColumns)}\n        </div>\n      </div>\n    );\n  }\n\n  renderLeftPaneFooter() {\n    if (!this.state.cells || this.props.fixedLeftColumnCount < 1 || this.props.fixedFooterCount < 1) {\n      return null;\n    }\n\n    const {styles} = Grid;\n\n    const attrs = {\n      ...styles.pane,\n      left: 0,\n      bottom: 0,\n      right: 0,\n      height: this.fixedFootersHeight\n    };\n\n    const contentStyle = {\n    };\n\n    const fromRow = this.props.rowCount > 0 ? this.props.rowCount - this.props.fixedFooterCount : 0;\n    const toRow = fromRow ? fromRow + this.props.fixedFooterCount - 1 : null;\n\n    return (\n      <div ref={this.bindLeftPaneFooter}\n           className={cx('left-pane-footer')}\n           style={attrs}>\n        <div className={cx(styles.leftPaneFooterContent)}\n             style={contentStyle}>\n          {this.renderCellRange(fromRow, toRow, 0, this.props.fixedLeftColumnCount - 1, this.state.cells.bottomLeftRows, this.state.cells.bottomLeftColumns)}\n        </div>\n      </div>\n    );\n  }\n\n  renderLeftPaneBody() {\n    if (!this.state.cells || this.props.fixedLeftColumnCount < 1) {\n      return null;\n    }\n\n    const {styles} = Grid;\n\n    const attrs = {\n      ...styles.pane,\n      left: 0,\n      top: this.fixedHeadersHeight,\n      right: 0,\n      bottom: this.fixedFootersHeight\n    };\n\n    const contentStyle = {\n      position: 'absolute',\n      width: this.props.estimatedColumnWidth,\n      height: this.props.estimatedRowHeight * this.props.rowCount,\n      ...styles.translatedPane\n    };\n\n    const fromRow = this.state.cells.leftRows.length ? this.state.cells.leftRows[0][0] : null;\n    const toRow = this.state.cells.leftRows.length ? this.state.cells.leftRows[this.state.cells.leftRows.length - 1][0] : null;\n\n    return (\n      <div ref={this.bindLeftPaneBody}\n           className={cx('left-pane-body')}\n           style={attrs}>\n        <div className={cx(styles.leftPaneBodyContent)}\n             style={contentStyle}>\n          {this.renderCellRange(fromRow, toRow, 0, this.props.fixedLeftColumnCount - 1, this.state.cells.leftRows, this.state.cells.leftColumns)}\n        </div>\n      </div>\n    );\n  }\n\n  renderRightPane() {\n    if (!this.state.cells || this.props.fixedRightColumnCount < 1) {\n      return null;\n    }\n\n    const {styles} = Grid;\n\n    const attrs = {\n      ...styles.pane,\n      right: 0,\n      width: this.fixedRightColumnsWidth\n    };\n\n    return (\n      <div ref={this.bindRightPane}\n           className={cx('right-pane')}\n           style={attrs}>\n        {this.renderRightPaneHeader()}\n        {this.renderRightPaneFooter()}\n        {this.renderRightPaneBody()}\n      </div>\n    );\n  }\n\n  renderRightPaneHeader() {\n    if (!this.state.cells || this.props.fixedRightColumnCount < 1) {\n      return null;\n    }\n\n    const {styles} = Grid;\n\n    const attrs = {\n      ...styles.pane,\n      left: 0,\n      top: 0,\n      right: 0,\n      height: this.fixedHeadersHeight\n    };\n\n    const contentStyle = {\n    };\n\n    const fromColumn = this.props.columnCount > 0 ? this.props.columnCount - this.props.fixedRightColumnCount : 0;\n    const toColumn = fromColumn ? fromColumn + this.props.fixedRightColumnCount - 1 : null;\n\n    return (\n      <div ref={this.bindRightPaneHeader}\n           className={cx('right-pane-header')}\n           style={attrs}>\n        <div className={cx(styles.rightPaneHeaderContent)}\n             style={contentStyle}>\n          {this.renderCellRange(0, this.props.fixedHeaderCount - 1, fromColumn, toColumn, this.state.cells.topRightRows, this.state.cells.topRightColumns)}\n        </div>\n      </div>\n    );\n  }\n\n  renderRightPaneFooter() {\n    if (!this.state.cells || this.props.fixedRightColumnCount < 1 || this.props.fixedFooterCount < 1) {\n      return null;\n    }\n\n    const {styles} = Grid;\n\n    const attrs = {\n      ...styles.pane,\n      left: 0,\n      bottom: 0,\n      right: 0,\n      height: this.fixedFootersHeight\n    };\n\n    const contentStyle = {\n    };\n\n    const fromRow = this.props.rowCount > 0 ? this.props.rowCount - this.props.fixedFooterCount : 0;\n    const toRow = fromRow ? fromRow + this.props.fixedFooterCount - 1 : null;\n\n    const fromColumn = this.props.columnCount > 0 ? this.props.columnCount - this.props.fixedRightColumnCount : 0;\n    const toColumn = fromColumn ? fromColumn + this.props.fixedRightColumnCount - 1 : null;\n\n    return (\n      <div ref={this.bindRightPaneFooter}\n           className={cx('right-pane-footer')}\n           style={attrs}>\n        <div className={cx(styles.rightPaneFooterContent)}\n             style={contentStyle}>\n          {this.renderCellRange(fromRow, toRow, fromColumn, toColumn, this.state.cells.bottomRightRows, this.state.cells.bottomRightColumns)}\n        </div>\n      </div>\n    );\n  }\n\n  renderRightPaneBody() {\n    if (!this.state.cells || this.props.fixedRightColumnCount < 1) {\n      return null;\n    }\n\n    const {styles} = Grid;\n\n    const attrs = {\n      ...styles.pane,\n      left: 0,\n      top: this.fixedHeadersHeight,\n      right: 0,\n      bottom: this.fixedFootersHeight\n    };\n\n    const contentStyle = {\n      position: 'absolute',\n      width: this.props.estimatedColumnWidth,\n      height: this.props.estimatedRowHeight * this.props.rowCount,\n      top: -this.fixedHeadersHeight,\n      bottom: -this.fixedFootersHeight,\n      ...styles.translatedPane\n    };\n\n    const fromColumn = this.props.columnCount > 0 ? this.props.columnCount - this.props.fixedRightColumnCount : 0;\n    const toColumn = fromColumn ? fromColumn + this.props.fixedRightColumnCount - 1 : null;\n\n    const fromRow = this.state.cells.leftRows.length ? this.state.cells.leftRows[0][0] : null;\n    const toRow = this.state.cells.leftRows.length ? this.state.cells.leftRows[this.state.cells.leftRows.length - 1][0] : null;\n\n    return (\n      <div ref={this.bindRightPaneBody}\n           className={cx('right-pane-body')}\n           style={attrs}>\n        <div className={cx(styles.rightPaneBodyContent)}\n             style={contentStyle}>\n          {this.renderCellRange(fromRow, toRow, fromColumn, toColumn, this.state.cells.rightRows, this.state.cells.rightColumns)}\n        </div>\n      </div>\n    );\n  }\n\n  renderCenterPane() {\n    const {styles} = Grid;\n\n    const attrs = {\n      ...styles.pane,\n      left: this.fixedLeftColumnsWidth,\n      right: this.fixedRightColumnsWidth\n    };\n\n    return (\n      <div ref={this.bindCenterPane}\n           className={cx('center-pane')}\n           style={attrs}>\n        {this.renderCenterPaneHeader()}\n        {this.renderCenterPaneFooter()}\n        {this.renderCenterPaneBody()}\n      </div>\n    );\n  }\n\n  renderCenterPaneHeader() {\n    if (!this.state.cells || this.props.fixedHeaderCount < 1) {\n      return null;\n    }\n\n    const {styles} = Grid;\n\n    const attrs = {\n      ...styles.pane,\n      left: 0,\n      top: 0,\n      right: 0,\n      height: this.fixedHeadersHeight,\n      overflow: 'visible' // TODO(zhm) this is needed for the column menus, what does it possibly break?\n    };\n\n    const contentStyle = {\n      position: 'absolute',\n      width: this.props.estimatedColumnWidth * this.props.columnCount,\n      height: this.props.estimatedRowHeight,\n      left: -this.fixedLeftColumnsWidth,\n      ...styles.translatedPane\n    };\n\n    const fromColumn = this.state.cells.topColumns.length ? this.state.cells.topColumns[0][0] : null;\n    const toColumn = this.state.cells.topColumns.length ? this.state.cells.topColumns[this.state.cells.topColumns.length - 1][0] : null;\n\n    return (\n      <div ref={this.bindCenterPaneHeader}\n           className={cx('center-pane-header')}\n           style={attrs}>\n        <div className={cx(styles.centerPaneHeaderContent)}\n             style={contentStyle}>\n          {this.renderCellRange(0, this.props.fixedHeaderCount - 1, fromColumn, toColumn, this.state.cells.topRows, this.state.cells.topColumns)}\n        </div>\n      </div>\n    );\n  }\n\n  renderCenterPaneFooter() {\n    if (!this.state.cells || this.props.fixedFooterCount < 1) {\n      return null;\n    }\n\n    const {styles} = Grid;\n\n    const attrs = {\n      ...styles.pane,\n      left: 0,\n      bottom: 0,\n      right: 0,\n      height: this.fixedFootersHeight,\n      overflow: 'visible' // TODO(zhm) this is needed for the column menus, what does it possibly break?\n    };\n\n    const contentStyle = {\n      position: 'absolute',\n      width: this.props.estimatedColumnWidth * this.props.columnCount,\n      height: this.props.estimatedRowHeight,\n      left: -this.fixedLeftColumnsWidth,\n      ...styles.translatedPane\n    };\n\n    const fromColumn = this.state.cells.bottomColumns.length ? this.state.cells.bottomColumns[0][0] : null;\n    const toColumn = this.state.cells.bottomColumns.length ? this.state.cells.bottomColumns[this.state.cells.bottomColumns.length - 1][0] : null;\n\n    const fromRow = this.props.rowCount > 0 ? this.props.rowCount - this.props.fixedFooterCount : 0;\n    const toRow = fromRow ? fromRow + this.props.fixedFooterCount - 1 : null;\n\n    return (\n      <div ref={this.bindCenterPaneFooter}\n           className={cx('center-pane-footer')}\n           style={attrs}>\n        <div className={cx(styles.centerPaneHeaderContent)}\n             style={contentStyle}>\n          {this.renderCellRange(fromRow, toRow, fromColumn, toColumn, this.state.cells.bottomRows, this.state.cells.bottomColumns)}\n        </div>\n      </div>\n    );\n  }\n\n  renderCenterPaneBody() {\n    if (!this.state.cells) {\n      return null;\n    }\n\n    const {styles} = Grid;\n\n    const attrs = {\n      ...styles.pane,\n      left: 0,\n      top: this.fixedHeadersHeight,\n      right: 0,\n      bottom: this.fixedFootersHeight\n    };\n\n    const contentStyle = {\n      position: 'absolute',\n      width: this.props.estimatedColumnWidth * this.props.columnCount,\n      height: this.props.estimatedRowHeight * this.props.rowCount,\n      left: -this.fixedLeftColumnsWidth,\n      top: -this.fixedHeadersHeight,\n      ...styles.translatedPane\n    };\n\n    const fromRow = this.state.cells.rows.length ? this.state.cells.rows[0][0] : null;\n    const toRow = this.state.cells.rows.length ? this.state.cells.rows[this.state.cells.rows.length - 1][0] : null;\n\n    const fromColumn = this.state.cells.columns.length ? this.state.cells.columns[0][0] : null;\n    const toColumn = this.state.cells.columns.length ? this.state.cells.columns[this.state.cells.columns.length - 1][0] : null;\n\n    return (\n      <div ref={this.bindCenterPaneBody}\n           className={cx('center-pane-body')}\n           style={attrs}>\n        <div className={cx(styles.centerPaneBodyContent)}\n             style={contentStyle}>\n          {this.renderCellRange(fromRow, toRow, fromColumn, toColumn, this.state.cells.rows, this.state.cells.columns)}\n        </div>\n      </div>\n    );\n  }\n\n  renderColumnResizeGuide() {\n    if (this._resizingColumn == null) {\n      return null;\n    }\n\n    const {styles} = Grid;\n\n    const column = this.state.cells.columns.find((cell) => {\n      return cell[0] === this._resizingColumn;\n    });\n\n    const guideStyle = {\n      ...styles.columnResizeGuide,\n      left: column[1] + column[2] - 2\n    };\n\n    return (\n      <div style={guideStyle} />\n    );\n  }\n\n  renderRowResizeGuide() {\n    if (this._resizingRow == null) {\n      return null;\n    }\n\n    const {styles} = Grid;\n\n    const row = this.state.cells.rows.find((cell) => {\n      return cell[0] === this._resizingRow;\n    });\n\n    const guideStyle = {\n      ...styles.rowResizeGuide,\n      top: row[1] + row[2] - 2\n    };\n\n    return (\n      <div style={guideStyle} />\n    );\n  }\n\n  get isScrolling() {\n    return this._scrolling;\n  }\n\n  get scrollableWidth() {\n    if (!this.state.cells || !this.state.cells.columns.length) {\n      return this.props.estimatedColumnWidth * this.props.columnCount;\n    }\n\n    const lastColumn = this.state.cells.columns[this.state.cells.columns.length - 1];\n    const width = lastColumn[1] + lastColumn[2];\n\n    return width + (((this.props.columnCount - 1) - lastColumn[0]) * this.props.estimatedColumnWidth);\n  }\n\n  get scrollableHeight() {\n    if (!this.state.cells || !this.state.cells.rows.length) {\n      return this.props.estimatedRowHeight * this.props.rowCount;\n    }\n\n    const lastRow = this.state.cells.rows[this.state.cells.rows.length - 1];\n    const height = lastRow[1] + lastRow[2];\n\n    return height + (((this.props.rowCount - 1) - lastRow[0]) * this.props.estimatedRowHeight);\n  }\n\n  get fixedHeadersHeight() {\n    if (!this.state.cells || !this.state.cells.topLeftRows.length) {\n      return 0;\n    }\n\n    const lastTopLeftRow = this.state.cells.topLeftRows[this.state.cells.topLeftRows.length - 1];\n    const topOffset = lastTopLeftRow[1] + lastTopLeftRow[2];\n\n    return topOffset;\n  }\n\n  get fixedFootersHeight() {\n    if (!this.state.cells || !this.state.cells.bottomLeftRows.length) {\n      return 0;\n    }\n\n    const lastBottomRow = this.state.cells.bottomLeftRows[this.state.cells.bottomLeftRows.length - 1];\n    const lastBottomRowTop = lastBottomRow[1] + lastBottomRow[2];\n\n    return lastBottomRowTop;\n  }\n\n  get fixedRightColumnsWidth() {\n    if (!this.state.cells || this.state.cells.rightColumns.length === 0) {\n      return 0;\n    }\n\n    const lastColumn = this.state.cells.rightColumns[this.state.cells.rightColumns.length - 1];\n    const lastOffset = lastColumn[1] + lastColumn[2];\n\n    return lastOffset;\n  }\n\n  get fixedLeftColumnsWidth() {\n    if (!this.state.cells || !this.state.cells.leftColumns.length) {\n      return 0;\n    }\n\n    const lastColumn = this.state.cells.leftColumns[this.state.cells.leftColumns.length - 1];\n    const lastOffset = lastColumn[1] + lastColumn[2];\n\n    return lastOffset;\n  }\n\n  bindRoot = (node) => {\n    this._root = node;\n  }\n\n  bindScrollOverlay = (node) => {\n    this._scrollOverlay = node;\n  }\n\n  bindScrollInner = (node) => {\n    this._scrollInner = node;\n  }\n\n  bindLeftPane = (node) => {\n    this._leftPane = node;\n  }\n\n  bindLeftPaneHeader = (node) => {\n    this._leftPaneHeader = node;\n  }\n\n  bindLeftPaneFooter = (node) => {\n    this._leftPaneFooter = node;\n  }\n\n  bindLeftPaneBody = (node) => {\n    this._leftPaneBody = node;\n  }\n\n  bindRightPane = (node) => {\n    this._rightPane = node;\n  }\n\n  bindRightPaneHeader = (node) => {\n    this._rightPaneHeader = node;\n  }\n\n  bindRightPaneFooter = (node) => {\n    this._rightPaneFooter = node;\n  }\n\n  bindRightPaneBody = (node) => {\n    this._rightPaneBody = node;\n  }\n\n  bindCenterPane = (node) => {\n    this._centerPane = node;\n  }\n\n  bindCenterPaneHeader = (node) => {\n    this._centerPaneHeader = node;\n  }\n\n  bindCenterPaneFooter = (node) => {\n    this._centerPaneFooter = node;\n  }\n\n  bindCenterPaneBody = (node) => {\n    this._centerPaneBody = node;\n  }\n\n  handleResize = (event) => {\n    this.update(this.scrollTop, this.scrollLeft);\n  }\n\n  handleScroll = (event) => {\n    this.update(this.scrollTop, this.scrollLeft);\n\n    if (this.props.onScroll) {\n      this.props.onScroll(this);\n    }\n  }\n\n  handleScrollStart = (event) => {\n    this._scrolling = true;\n\n    if (this.props.onScrollStart) {\n      this.props.onScrollStart(this);\n    }\n  }\n\n  handleScrollEnd = (event) => {\n    this._scrolling = false;\n\n    if (this.props.onScrollEnd) {\n      this.props.onScrollEnd(this);\n    }\n  }\n\n  handleColumnResizeStart = (column, width) => {\n    this._resizingColumn = column;\n\n    // this._pinnedColumnWidths[column] = Math.min(10000, Math.max(20, width));\n    this.invalidateSizes();\n    this.refresh();\n  }\n\n  handleColumnResize = (column, width) => {\n    this._pinnedColumnWidths[column] = Math.min(10000, Math.max(20, width));\n    this.invalidateSizes();\n    this.refresh();\n  }\n\n  handleColumnResizeEnd = () => {\n    this._resizingColumn = null;\n\n    this.invalidateSizes();\n    this.refresh();\n  }\n\n  handleRowResizeStart = (row, height) => {\n    this._resizingRow = row;\n\n    // this._pinnedRowHeights[row] = Math.min(10000, Math.max(20, height));\n    this.invalidateSizes();\n    this.refresh();\n  }\n\n  handleRowResize = (row, height) => {\n    this._pinnedRowHeights[row] = Math.min(10000, Math.max(20, height));\n    this.invalidateSizes();\n    this.refresh();\n  }\n\n  handleRowResizeEnd = () => {\n    this._resizingRow = null;\n\n    this.invalidateSizes();\n    this.refresh();\n  }\n\n  invalidateSizes() {\n    this.calculator.invalidate();\n  }\n\n  refresh = (force) => {\n    this.update(this.scrollTop, this.scrollLeft, force);\n  }\n\n  update(scrollTop, scrollLeft, force) {\n    const x = scrollLeft - this.props.preloadPixelsX;\n    const y = scrollTop - this.props.preloadPixelsY;\n\n    const bounds = {\n      left: Math.max(0, x),\n      top: Math.max(0, y),\n      width: this._root.clientWidth + (2 * this.props.preloadPixelsX) + (x < 0 ? x : 0),\n      height: this._root.clientHeight + (2 * this.props.preloadPixelsY) + (y < 0 ? y : 0)\n    };\n\n    const cells = this.calculator.cellsWithinBounds(bounds, this.props.rowCount, this.props.columnCount);\n\n    if (cells.changed || force) {\n      const fromRow = cells.rows.length ? cells.rows[0][0] : null;\n      const toRow = cells.rows.length ? cells.rows[cells.rows.length - 1][0] : null;\n      const fromColumn = cells.columns.length ? cells.columns[0][0] : null;\n      const toColumn = cells.columns.length ? cells.columns[cells.columns.length - 1][0] : null;\n\n      if (this.props.onExtentsChange) {\n        this.props.onExtentsChange(fromRow, toRow, fromColumn, toColumn);\n      }\n\n      this.setState({cells: cells});\n    }\n\n    if (this.state.cells) {\n      this.setScroll(scrollLeft, scrollTop);\n    }\n\n    const scrollableWidth = this.scrollableWidth;\n    const scrollableHeight = this.scrollableHeight;\n\n    // if the srollable width or height changes, refresh the scroller\n    if (force || this._lastScrollableWidth !== scrollableWidth || this._lastScrollableHeight !== scrollableHeight) {\n      this._lastScrollableWidth = scrollableWidth;\n      this._lastScrollableHeight = scrollableHeight;\n\n      setTimeout(() => this._scroller.refresh(), 1);\n    }\n  }\n\n  setScroll(x, y) {\n    if (this._leftPaneBody) {\n      this._leftPaneBody.childNodes[0].style.top = (-y - this.fixedHeadersHeight) + 'px';\n    }\n\n    if (this._rightPaneBody) {\n      this._rightPaneBody.childNodes[0].style.top = (-y - this.fixedHeadersHeight) + 'px';\n    }\n\n    if (this._centerPaneHeader) {\n      this._centerPaneHeader.childNodes[0].style.left = (-x - this.fixedLeftColumnsWidth) + 'px';\n    }\n\n    if (this._centerPaneFooter) {\n      this._centerPaneFooter.childNodes[0].style.left = (-x - this.fixedLeftColumnsWidth) + 'px';\n    }\n\n    this._centerPaneBody.childNodes[0].style.top = (-y - this.fixedHeadersHeight) + 'px';\n    this._centerPaneBody.childNodes[0].style.left = (-x - this.fixedLeftColumnsWidth) + 'px';\n\n    if (this._leftPane) {\n      this._leftPane.style.left = x + 'px';\n      this._leftPane.style.top = y + 'px';\n      this._leftPane.style.height = this._scrollOverlay.offsetHeight + 'px';\n    }\n\n    if (this._rightPane) {\n      this._rightPane.style.left = (x + this._scrollOverlay.offsetWidth - this.fixedRightColumnsWidth) + 'px';\n      this._rightPane.style.top = y + 'px';\n      this._rightPane.style.height = this._scrollOverlay.offsetHeight + 'px';\n    }\n\n    this._centerPane.style.left = (x + this.fixedLeftColumnsWidth) + 'px';\n    this._centerPane.style.top = y + 'px';\n    this._centerPane.style.height = this._scrollOverlay.offsetHeight + 'px';\n    this._centerPane.style.width = (this._scrollOverlay.offsetWidth - this.fixedRightColumnsWidth - this.fixedLeftColumnsWidth) + 'px';\n  }\n\n  get calculator() {\n    if (!this._calculator) {\n      this._calculator = new GridCalculator();\n      this._calculator.estimatedColumnWidth = this.props.estimatedColumnWidth;\n      this._calculator.estimatedRowHeight = this.props.estimatedRowHeight;\n      this._calculator.fixedLeftColumnCount = this.props.fixedLeftColumnCount;\n      this._calculator.fixedRightColumnCount = this.props.fixedRightColumnCount;\n      this._calculator.fixedHeaderCount = this.props.fixedHeaderCount;\n      this._calculator.fixedFooterCount = this.props.fixedFooterCount;\n      this._calculator.calculateRowHeight = this.calculateRowHeight;\n      this._calculator.calculateColumnWidth = this.calculateColumnWidth;\n    }\n\n    return this._calculator;\n  }\n\n  calculateRowHeight = (row) => {\n    if (this._pinnedRowHeights[row] != null) {\n      return this._pinnedRowHeights[row];\n    }\n\n    return this.props.rowHeight(row);\n  }\n\n  calculateColumnWidth = (column) => {\n    if (this._pinnedColumnWidths[column] != null) {\n      return this._pinnedColumnWidths[column];\n    }\n\n    return this.props.columnWidth(column);\n  }\n\n  renderCellRange(fromRow, toRow, fromColumn, toColumn, rows, columns) {\n    const cells = [];\n\n    const render = this.props.renderCell;\n\n    for (let row = toRow, visibleRowIndex = 0; row >= fromRow; --row, ++visibleRowIndex) {\n      for (let column = toColumn, visibleColumnIndex = 0; column >= fromColumn; --column, ++visibleColumnIndex) {\n        const rowData = rows[row - fromRow];\n        const columnData = columns[column - fromColumn];\n\n        cells.push(render(row, rowData, column, columnData, this, visibleRowIndex, visibleColumnIndex));\n      }\n    }\n\n    return cells;\n  }\n\n  get scrollTop() {\n    return -this._scroller.y;\n  }\n\n  get scrollLeft() {\n    return -this._scroller.x;\n  }\n}\n\nconst styles = {\n  container: {\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0\n  },\n\n  scrollOverlay: {\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n    overflow: 'hidden'\n  },\n\n  scrollContainer: {\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0\n  },\n\n  gridBody: {\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n    overflow: 'hidden'\n  },\n\n  pane: {\n    position: 'absolute',\n    overflow: 'hidden'\n  },\n\n  translatedPane: {\n  },\n\n  columnResizeGuide: {\n    position: 'absolute',\n    top: 1,\n    bottom: 0,\n    width: 4,\n    backgroundColor: '#18a3f7',\n    cursor: 'ew-resize',\n    borderRadius: 0\n  },\n\n  rowResizeGuide: {\n    position: 'absolute',\n    left: 1,\n    right: 0,\n    height: 4,\n    backgroundColor: '#18a3f7',\n    cursor: 'ns-resize',\n    borderRadius: 0\n  }\n};\n\nGrid.styles = styles;\n"]}