{"version":3,"sources":["../src/grid-calculator.js"],"names":["GridCalculator","invalidate","getSize","index","cache","calculateSize","estimatedSize","customSize","cellsWithinRange","minPixel","maxPixel","maxCells","pixel","sizes","found","size","length","push","fixedCellsWithinRange","fixedCellCount","count","cellIndex","cellsWithinBounds","bounds","rowCount","columnCount","lastTopRow","lastTopRowBottom","lastBottomRow","lastBottomRowTop","lastRightColumn","lastRightColumnLeft","lastTopColumn","lastTopColumnRight","scrollableRowCount","_fixedFooterCount","scrollableColumnCount","_fixedRightColumnCount","topLeftRows","_estimatedRowHeight","_heightCache","_fixedHeaderCount","calculateRowHeight","topLeftColumns","_estimatedColumnWidth","_widthCache","_fixedLeftColumnCount","calculateColumnWidth","bottomLeftRows","bottomLeftColumns","leftRows","top","height","leftColumns","topRightRows","topRightColumns","bottomRightRows","bottomRightColumns","rightRows","rightColumns","topRows","topColumns","left","width","rows","columns","bottomRows","bottomColumns","minColumn","maxColumn","minRow","maxRow","same","_minColumn","_maxColumn","_minRow","_maxRow","changed"],"mappings":";;;;;;;;IAAqBA,c;AACnB,4BAAc;AAAA;;AACZ,SAAKC,UAAL;AACD;;2BAgCDC,O,oBAAQC,K,EAAOC,K,EAAOC,a,EAAeC,a,EAAe;AAClD,QAAIC,aAAaH,MAAMD,KAAN,CAAjB;;AAEA,QAAII,cAAc,IAAlB,EAAwB;AACtBA,mBAAaH,MAAMD,KAAN,IAAeE,cAAcF,KAAd,CAA5B;AACD;;AAED,WAAQI,cAAc,IAAd,GAAqBA,UAArB,GAAkCD,aAA1C;AACD,G;;2BAEDE,gB,6BAAiBC,Q,EAAUC,Q,EAAUJ,a,EAAeF,K,EAAOO,Q,EAAUN,a,EAAe;AAClF,QAAIO,QAAQ,CAAZ;AACA,QAAIT,QAAQ,CAAZ;;AAEA,QAAMU,QAAQ,EAAd;;AAEA,QAAIC,QAAQ,KAAZ;;AAEA;AACA,WAAO,CAACA,KAAD,IAAUX,QAAQQ,QAAzB,EAAmC;AACjC,UAAMI,OAAO,KAAKb,OAAL,CAAaC,KAAb,EAAoBC,KAApB,EAA2BC,aAA3B,EAA0CC,aAA1C,CAAb;;AAEA,UAAIM,QAAQG,IAAR,GAAeN,QAAnB,EAA6B;AAC3BK,gBAAQ,IAAR;AACD,OAFD,MAEO;AACLF,iBAASG,IAAT;;AAEA,UAAEZ,KAAF;AACD;AACF;;AAED;AACA,WAAOO,WAAWE,KAAX,IAAoBC,MAAMG,MAAN,GAAeL,QAAnC,IAA+CR,QAAQQ,QAA9D,EAAwE;AACtE,UAAMI,QAAO,KAAKb,OAAL,CAAaC,KAAb,EAAoBC,KAApB,EAA2BC,aAA3B,EAA0CC,aAA1C,CAAb;;AAEAO,YAAMI,IAAN,CAAW,CAAEd,KAAF,EAASS,KAAT,EAAgBG,KAAhB,CAAX;;AAEAH,eAASG,KAAT;;AAEA,QAAEZ,KAAF;AACD;;AAED,WAAOU,KAAP;AACD,G;;2BAEDK,qB,kCAAsBC,c,EAAgBb,a,EAAeF,K,EAAOO,Q,EAAUN,a,EAAe;AACnF,QAAMQ,QAAQ,EAAd;AACA,QAAID,QAAQ,CAAZ;;AAEA,SAAK,IAAIQ,QAAQD,cAAjB,EAAiCC,QAAQ,CAAzC,EAA4C,EAAEA,KAA9C,EAAqD;AACnD,UAAMC,YAAYV,WAAWS,KAA7B;;AAEA,UAAML,OAAO,KAAKb,OAAL,CAAamB,SAAb,EAAwBjB,KAAxB,EAA+BC,aAA/B,EAA8CC,aAA9C,CAAb;;AAEAO,YAAMI,IAAN,CAAW,CAAEI,SAAF,EAAaT,KAAb,EAAoBG,IAApB,CAAX;;AAEAH,eAASG,IAAT;AACD;;AAED,WAAOF,KAAP;AACD,G;;2BAEDS,iB,8BAAkBC,M,EAAQC,Q,EAAUC,W,EAAa;AAC/C,QAAIC,aAAa,IAAjB;AACA,QAAIC,mBAAmB,CAAvB;;AAEA,QAAIC,gBAAgB,IAApB;AACA,QAAIC,mBAAmB,CAAvB;;AAEA,QAAIC,kBAAkB,IAAtB;AACA,QAAIC,sBAAsB,CAA1B;;AAEA,QAAIC,gBAAgB,IAApB;AACA,QAAIC,qBAAqB,CAAzB;;AAEA,QAAMC,qBAAqBV,WAAW,KAAKW,iBAA3C;AACA,QAAMC,wBAAwBX,cAAc,KAAKY,sBAAjD;;AAEA;AACA,QAAMC,cAAc,KAAK9B,gBAAL,CAAsB,CAAtB,EACsB,GADtB,EAEsB,KAAK+B,mBAF3B,EAGsB,KAAKC,YAH3B,EAIsB,KAAKC,iBAJ3B,EAKsB,KAAKC,kBAL3B,CAApB;;AAOA,QAAMC,iBAAiB,KAAKnC,gBAAL,CAAsB,CAAtB,EACsB,GADtB,EAEsB,KAAKoC,qBAF3B,EAGsB,KAAKC,WAH3B,EAIsB,KAAKC,qBAJ3B,EAKsB,KAAKC,oBAL3B,CAAvB;;AAOA;AACA,QAAIT,YAAYtB,MAAhB,EAAwB;AACtBU,mBAAaY,YAAYA,YAAYtB,MAAZ,GAAqB,CAAjC,CAAb;AACAW,yBAAmBD,WAAW,CAAX,IAAgBA,WAAW,CAAX,CAAnC;AACD;;AAED,QAAIiB,eAAe3B,MAAnB,EAA2B;AACzBgB,sBAAgBW,eAAeA,eAAe3B,MAAf,GAAwB,CAAvC,CAAhB;AACAiB,2BAAqBD,cAAc,CAAd,IAAmBA,cAAc,CAAd,CAAxC;AACD;;AAED;AACA,QAAMgB,iBAAiB,KAAK9B,qBAAL,CAA2B,KAAKiB,iBAAhC,EAC2B,KAAKI,mBADhC,EAE2B,KAAKC,YAFhC,EAG2BhB,QAH3B,EAI2B,KAAKkB,kBAJhC,CAAvB;;AAMA,QAAMO,oBAAoB,KAAKzC,gBAAL,CAAsB,CAAtB,EACsB,GADtB,EAEsB,KAAKoC,qBAF3B,EAGsB,KAAKC,WAH3B,EAIsB,KAAKC,qBAJ3B,EAKsB,KAAKC,oBAL3B,CAA1B;;AAOA,QAAIC,eAAehC,MAAnB,EAA2B;AACzBY,sBAAgBoB,eAAeA,eAAehC,MAAf,GAAwB,CAAvC,CAAhB;AACAa,yBAAmBD,cAAc,CAAd,IAAmBA,cAAc,CAAd,CAAtC;AACD;;AAED,QAAMsB,WAAW,KAAK1C,gBAAL,CAAsBe,OAAO4B,GAAP,GAAaxB,gBAAnC,EACsBJ,OAAO4B,GAAP,GAAa5B,OAAO6B,MAApB,GAA6BvB,gBADnD,EAEsB,KAAKU,mBAF3B,EAGsB,KAAKC,YAH3B,EAIsBN,kBAJtB,EAKsB,KAAKQ,kBAL3B,CAAjB;;AAOA,QAAMW,cAAc,KAAK7C,gBAAL,CAAsB,CAAtB,EACsB,GADtB,EAEsB,KAAKoC,qBAF3B,EAGsB,KAAKC,WAH3B,EAIsB,KAAKC,qBAJ3B,EAKsB,KAAKC,oBAL3B,CAApB;;AAOA;AACA,QAAMO,eAAe,KAAK9C,gBAAL,CAAsB,CAAtB,EACsB,GADtB,EAEsB,KAAK+B,mBAF3B,EAGsB,KAAKC,YAH3B,EAIsB,KAAKC,iBAJ3B,EAKsB,KAAKC,kBAL3B,CAArB;;AAOA,QAAMa,kBAAkB,KAAKrC,qBAAL,CAA2B,KAAKmB,sBAAhC,EAC2B,KAAKO,qBADhC,EAE2B,KAAKC,WAFhC,EAG2BpB,WAH3B,EAI2B,KAAKsB,oBAJhC,CAAxB;;AAMA;AACA,QAAMS,kBAAkB,KAAKtC,qBAAL,CAA2B,KAAKiB,iBAAhC,EAC2B,KAAKI,mBADhC,EAE2B,KAAKC,YAFhC,EAG2BhB,QAH3B,EAI2B,KAAKkB,kBAJhC,CAAxB;;AAMA,QAAMe,qBAAqB,KAAKvC,qBAAL,CAA2B,KAAKmB,sBAAhC,EAC2B,KAAKO,qBADhC,EAE2B,KAAKC,WAFhC,EAG2BpB,WAH3B,EAI2B,KAAKsB,oBAJhC,CAA3B;;AAMA,QAAMW,YAAY,KAAKlD,gBAAL,CAAsBe,OAAO4B,GAAP,GAAaxB,gBAAnC,EACsBJ,OAAO4B,GAAP,GAAa5B,OAAO6B,MAApB,GAA6BvB,gBADnD,EAEsB,KAAKU,mBAF3B,EAGsB,KAAKC,YAH3B,EAIsBN,kBAJtB,EAKsB,KAAKQ,kBAL3B,CAAlB;;AAOA,QAAMiB,eAAe,KAAKzC,qBAAL,CAA2B,KAAKmB,sBAAhC,EAC2B,KAAKO,qBADhC,EAE2B,KAAKC,WAFhC,EAG2BpB,WAH3B,EAI2B,KAAKsB,oBAJhC,CAArB;;AAMA,QAAIU,mBAAmBzC,MAAvB,EAA+B;AAC7Bc,wBAAkB2B,mBAAmBA,mBAAmBzC,MAAnB,GAA4B,CAA/C,CAAlB;AACAe,4BAAsBD,gBAAgB,CAAhB,IAAqBA,gBAAgB,CAAhB,CAA3C;AACD;;AAED;AACA,QAAM8B,UAAU,KAAKpD,gBAAL,CAAsB,CAAtB,EACsB,GADtB,EAEsB,KAAK+B,mBAF3B,EAGsB,KAAKC,YAH3B,EAIsB,KAAKC,iBAJ3B,EAKsB,KAAKC,kBAL3B,CAAhB;;AAOA,QAAMmB,aAAa,KAAKrD,gBAAL,CAAsBe,OAAOuC,IAAP,GAAc7B,kBAApC,EACsBV,OAAOuC,IAAP,GAAcvC,OAAOwC,KAArB,GAA6BhC,mBADnD,EAEsB,KAAKa,qBAF3B,EAGsB,KAAKC,WAH3B,EAIsBT,qBAJtB,EAKsB,KAAKW,oBAL3B,CAAnB;;AAOA;AACA,QAAMiB,OAAO,KAAKxD,gBAAL,CAAsBe,OAAO4B,GAAP,GAAaxB,gBAAnC,EACsBJ,OAAO4B,GAAP,GAAa5B,OAAO6B,MAApB,GAA6BvB,gBADnD,EAEsB,KAAKU,mBAF3B,EAGsB,KAAKC,YAH3B,EAIsBN,kBAJtB,EAKsB,KAAKQ,kBAL3B,CAAb;;AAOA,QAAMuB,UAAU,KAAKzD,gBAAL,CAAsBe,OAAOuC,IAAP,GAAc7B,kBAApC,EACsBV,OAAOuC,IAAP,GAAcvC,OAAOwC,KAArB,GAA6BhC,mBADnD,EAEsB,KAAKa,qBAF3B,EAGsB,KAAKC,WAH3B,EAIsBT,qBAJtB,EAKsB,KAAKW,oBAL3B,CAAhB;;AAOA;AACA,QAAMmB,aAAa,KAAKhD,qBAAL,CAA2B,KAAKiB,iBAAhC,EAC2B,KAAKI,mBADhC,EAE2B,KAAKC,YAFhC,EAG2BhB,QAH3B,EAI2B,KAAKkB,kBAJhC,CAAnB;;AAMA,QAAMyB,gBAAgB,KAAK3D,gBAAL,CAAsBe,OAAOuC,IAAP,GAAc7B,kBAApC,EACsBV,OAAOuC,IAAP,GAAcvC,OAAOwC,KAArB,GAA6BhC,mBADnD,EAEsB,KAAKa,qBAF3B,EAGsB,KAAKC,WAH3B,EAIsBT,qBAJtB,EAKsB,KAAKW,oBAL3B,CAAtB;;AAOA,QAAMqB,YAAYH,QAAQjD,MAAR,GAAiBiD,QAAQ,CAAR,EAAW,CAAX,CAAjB,GAAiC,IAAnD;AACA,QAAMI,YAAYJ,QAAQjD,MAAR,GAAiBiD,QAAQA,QAAQjD,MAAR,GAAiB,CAAzB,EAA4B,CAA5B,CAAjB,GAAkD,IAApE;;AAEA,QAAMsD,SAASN,KAAKhD,MAAL,GAAcgD,KAAK,CAAL,EAAQ,CAAR,CAAd,GAA2B,IAA1C;AACA,QAAMO,SAASP,KAAKhD,MAAL,GAAcgD,KAAKA,KAAKhD,MAAL,GAAc,CAAnB,EAAsB,CAAtB,CAAd,GAAyC,IAAxD;;AAEA,QAAMwD,OAAOJ,cAAc,KAAKK,UAAnB,IACAJ,cAAc,KAAKK,UADnB,IAEAJ,WAAW,KAAKK,OAFhB,IAGAJ,WAAW,KAAKK,OAH7B;;AAKA,SAAKH,UAAL,GAAkBL,SAAlB;AACA,SAAKM,UAAL,GAAkBL,SAAlB;AACA,SAAKM,OAAL,GAAeL,MAAf;AACA,SAAKM,OAAL,GAAeL,MAAf;;AAEA,WAAO;AACLM,eAAS,CAACL,IADL;;AAGLP,eAASA,OAHJ;AAILD,YAAMA,IAJD;;AAML1B,mBAAaA,WANR;AAOLK,sBAAgBA,cAPX;;AASLW,oBAAcA,YATT;AAULC,uBAAiBA,eAVZ;;AAYLP,sBAAgBA,cAZX;AAaLC,yBAAmBA,iBAbd;;AAeLO,uBAAiBA,eAfZ;AAgBLC,0BAAoBA,kBAhBf;;AAkBLP,gBAAUA,QAlBL;AAmBLG,mBAAaA,WAnBR;;AAqBLK,iBAAWA,SArBN;AAsBLC,oBAAcA,YAtBT;;AAwBLC,eAASA,OAxBJ;AAyBLC,kBAAYA,UAzBP;;AA2BLK,kBAAYA,UA3BP;AA4BLC,qBAAeA;AA5BV,KAAP;AA8BD,G;;2BAEDlE,U,yBAAa;AACX,SAAK4C,WAAL,GAAmB,EAAnB;AACA,SAAKL,YAAL,GAAoB,EAApB;AACA,SAAKiC,UAAL,GAAkB,IAAlB;AACA,SAAKC,UAAL,GAAkB,IAAlB;AACA,SAAKC,OAAL,GAAe,IAAf;AACA,SAAKC,OAAL,GAAe,IAAf;AACD,G;;;;sBAvTwBxD,K,EAAO;AAC9B,WAAK0B,qBAAL,GAA6B1B,KAA7B;AACA,WAAKnB,UAAL;AACD;;;sBAEyBmB,K,EAAO;AAC/B,WAAKiB,sBAAL,GAA8BjB,KAA9B;AACA,WAAKnB,UAAL;AACD;;;sBAEoBmB,K,EAAO;AAC1B,WAAKqB,iBAAL,GAAyBrB,KAAzB;AACA,WAAKnB,UAAL;AACD;;;sBAEoBmB,K,EAAO;AAC1B,WAAKe,iBAAL,GAAyBf,KAAzB;AACA,WAAKnB,UAAL;AACD;;;sBAEwB8D,K,EAAO;AAC9B,WAAKnB,qBAAL,GAA6BmB,KAA7B;AACA,WAAK9D,UAAL;AACD;;;sBAEsBmD,M,EAAQ;AAC7B,WAAKb,mBAAL,GAA2Ba,MAA3B;AACA,WAAKnD,UAAL;AACD;;;;;;kBAjCkBD,c","file":"grid-calculator.js","sourcesContent":["export default class GridCalculator {\n  constructor() {\n    this.invalidate();\n  }\n\n  set fixedLeftColumnCount(count) {\n    this._fixedLeftColumnCount = count;\n    this.invalidate();\n  }\n\n  set fixedRightColumnCount(count) {\n    this._fixedRightColumnCount = count;\n    this.invalidate();\n  }\n\n  set fixedHeaderCount(count) {\n    this._fixedHeaderCount = count;\n    this.invalidate();\n  }\n\n  set fixedFooterCount(count) {\n    this._fixedFooterCount = count;\n    this.invalidate();\n  }\n\n  set estimatedColumnWidth(width) {\n    this._estimatedColumnWidth = width;\n    this.invalidate();\n  }\n\n  set estimatedRowHeight(height) {\n    this._estimatedRowHeight = height;\n    this.invalidate();\n  }\n\n  getSize(index, cache, calculateSize, estimatedSize) {\n    let customSize = cache[index];\n\n    if (customSize == null) {\n      customSize = cache[index] = calculateSize(index);\n    }\n\n    return (customSize != null ? customSize : estimatedSize);\n  }\n\n  cellsWithinRange(minPixel, maxPixel, estimatedSize, cache, maxCells, calculateSize) {\n    let pixel = 0;\n    let index = 0;\n\n    const sizes = [];\n\n    let found = false;\n\n    // find the first edge\n    while (!found && index < maxCells) {\n      const size = this.getSize(index, cache, calculateSize, estimatedSize);\n\n      if (pixel + size > minPixel) {\n        found = true;\n      } else {\n        pixel += size;\n\n        ++index;\n      }\n    }\n\n    // find the other edge\n    while (maxPixel > pixel && sizes.length < maxCells && index < maxCells) {\n      const size = this.getSize(index, cache, calculateSize, estimatedSize);\n\n      sizes.push([ index, pixel, size ]);\n\n      pixel += size;\n\n      ++index;\n    }\n\n    return sizes;\n  }\n\n  fixedCellsWithinRange(fixedCellCount, estimatedSize, cache, maxCells, calculateSize) {\n    const sizes = [];\n    let pixel = 0;\n\n    for (let count = fixedCellCount; count > 0; --count) {\n      const cellIndex = maxCells - count;\n\n      const size = this.getSize(cellIndex, cache, calculateSize, estimatedSize);\n\n      sizes.push([ cellIndex, pixel, size ]);\n\n      pixel += size;\n    }\n\n    return sizes;\n  }\n\n  cellsWithinBounds(bounds, rowCount, columnCount) {\n    let lastTopRow = null;\n    let lastTopRowBottom = 0;\n\n    let lastBottomRow = null;\n    let lastBottomRowTop = 0;\n\n    let lastRightColumn = null;\n    let lastRightColumnLeft = 0;\n\n    let lastTopColumn = null;\n    let lastTopColumnRight = 0;\n\n    const scrollableRowCount = rowCount - this._fixedFooterCount;\n    const scrollableColumnCount = columnCount - this._fixedRightColumnCount;\n\n    // fixed-top-left\n    const topLeftRows = this.cellsWithinRange(0,\n                                              1e9,\n                                              this._estimatedRowHeight,\n                                              this._heightCache,\n                                              this._fixedHeaderCount,\n                                              this.calculateRowHeight);\n\n    const topLeftColumns = this.cellsWithinRange(0,\n                                                 1e9,\n                                                 this._estimatedColumnWidth,\n                                                 this._widthCache,\n                                                 this._fixedLeftColumnCount,\n                                                 this.calculateColumnWidth);\n\n    // fixed-left\n    if (topLeftRows.length) {\n      lastTopRow = topLeftRows[topLeftRows.length - 1];\n      lastTopRowBottom = lastTopRow[1] + lastTopRow[2];\n    }\n\n    if (topLeftColumns.length) {\n      lastTopColumn = topLeftColumns[topLeftColumns.length - 1];\n      lastTopColumnRight = lastTopColumn[1] + lastTopColumn[2];\n    }\n\n    // fixed-bottom-left\n    const bottomLeftRows = this.fixedCellsWithinRange(this._fixedFooterCount,\n                                                      this._estimatedRowHeight,\n                                                      this._heightCache,\n                                                      rowCount,\n                                                      this.calculateRowHeight);\n\n    const bottomLeftColumns = this.cellsWithinRange(0,\n                                                    1e9,\n                                                    this._estimatedColumnWidth,\n                                                    this._widthCache,\n                                                    this._fixedLeftColumnCount,\n                                                    this.calculateColumnWidth);\n\n    if (bottomLeftRows.length) {\n      lastBottomRow = bottomLeftRows[bottomLeftRows.length - 1];\n      lastBottomRowTop = lastBottomRow[1] + lastBottomRow[2];\n    }\n\n    const leftRows = this.cellsWithinRange(bounds.top + lastTopRowBottom,\n                                           bounds.top + bounds.height - lastBottomRowTop,\n                                           this._estimatedRowHeight,\n                                           this._heightCache,\n                                           scrollableRowCount,\n                                           this.calculateRowHeight);\n\n    const leftColumns = this.cellsWithinRange(0,\n                                              1e9,\n                                              this._estimatedColumnWidth,\n                                              this._widthCache,\n                                              this._fixedLeftColumnCount,\n                                              this.calculateColumnWidth);\n\n    // fixed-top-right\n    const topRightRows = this.cellsWithinRange(0,\n                                               1e9,\n                                               this._estimatedRowHeight,\n                                               this._heightCache,\n                                               this._fixedHeaderCount,\n                                               this.calculateRowHeight);\n\n    const topRightColumns = this.fixedCellsWithinRange(this._fixedRightColumnCount,\n                                                       this._estimatedColumnWidth,\n                                                       this._widthCache,\n                                                       columnCount,\n                                                       this.calculateColumnWidth);\n\n    // fixed-bottom-left\n    const bottomRightRows = this.fixedCellsWithinRange(this._fixedFooterCount,\n                                                       this._estimatedRowHeight,\n                                                       this._heightCache,\n                                                       rowCount,\n                                                       this.calculateRowHeight);\n\n    const bottomRightColumns = this.fixedCellsWithinRange(this._fixedRightColumnCount,\n                                                          this._estimatedColumnWidth,\n                                                          this._widthCache,\n                                                          columnCount,\n                                                          this.calculateColumnWidth);\n\n    const rightRows = this.cellsWithinRange(bounds.top + lastTopRowBottom,\n                                            bounds.top + bounds.height - lastBottomRowTop,\n                                            this._estimatedRowHeight,\n                                            this._heightCache,\n                                            scrollableRowCount,\n                                            this.calculateRowHeight);\n\n    const rightColumns = this.fixedCellsWithinRange(this._fixedRightColumnCount,\n                                                    this._estimatedColumnWidth,\n                                                    this._widthCache,\n                                                    columnCount,\n                                                    this.calculateColumnWidth);\n\n    if (bottomRightColumns.length) {\n      lastRightColumn = bottomRightColumns[bottomRightColumns.length - 1];\n      lastRightColumnLeft = lastRightColumn[1] + lastRightColumn[2];\n    }\n\n    // fixed-top\n    const topRows = this.cellsWithinRange(0,\n                                          1e9,\n                                          this._estimatedRowHeight,\n                                          this._heightCache,\n                                          this._fixedHeaderCount,\n                                          this.calculateRowHeight);\n\n    const topColumns = this.cellsWithinRange(bounds.left + lastTopColumnRight,\n                                             bounds.left + bounds.width - lastRightColumnLeft,\n                                             this._estimatedColumnWidth,\n                                             this._widthCache,\n                                             scrollableColumnCount,\n                                             this.calculateColumnWidth);\n\n    // scrollable cells\n    const rows = this.cellsWithinRange(bounds.top + lastTopRowBottom,\n                                       bounds.top + bounds.height - lastBottomRowTop,\n                                       this._estimatedRowHeight,\n                                       this._heightCache,\n                                       scrollableRowCount,\n                                       this.calculateRowHeight);\n\n    const columns = this.cellsWithinRange(bounds.left + lastTopColumnRight,\n                                          bounds.left + bounds.width - lastRightColumnLeft,\n                                          this._estimatedColumnWidth,\n                                          this._widthCache,\n                                          scrollableColumnCount,\n                                          this.calculateColumnWidth);\n\n    // fixed-bottom\n    const bottomRows = this.fixedCellsWithinRange(this._fixedFooterCount,\n                                                  this._estimatedRowHeight,\n                                                  this._heightCache,\n                                                  rowCount,\n                                                  this.calculateRowHeight);\n\n    const bottomColumns = this.cellsWithinRange(bounds.left + lastTopColumnRight,\n                                                bounds.left + bounds.width - lastRightColumnLeft,\n                                                this._estimatedColumnWidth,\n                                                this._widthCache,\n                                                scrollableColumnCount,\n                                                this.calculateColumnWidth);\n\n    const minColumn = columns.length ? columns[0][0] : null;\n    const maxColumn = columns.length ? columns[columns.length - 1][0] : null;\n\n    const minRow = rows.length ? rows[0][0] : null;\n    const maxRow = rows.length ? rows[rows.length - 1][0] : null;\n\n    const same = minColumn === this._minColumn &&\n                 maxColumn === this._maxColumn &&\n                 minRow === this._minRow &&\n                 maxRow === this._maxRow;\n\n    this._minColumn = minColumn;\n    this._maxColumn = maxColumn;\n    this._minRow = minRow;\n    this._maxRow = maxRow;\n\n    return {\n      changed: !same,\n\n      columns: columns,\n      rows: rows,\n\n      topLeftRows: topLeftRows,\n      topLeftColumns: topLeftColumns,\n\n      topRightRows: topRightRows,\n      topRightColumns: topRightColumns,\n\n      bottomLeftRows: bottomLeftRows,\n      bottomLeftColumns: bottomLeftColumns,\n\n      bottomRightRows: bottomRightRows,\n      bottomRightColumns: bottomRightColumns,\n\n      leftRows: leftRows,\n      leftColumns: leftColumns,\n\n      rightRows: rightRows,\n      rightColumns: rightColumns,\n\n      topRows: topRows,\n      topColumns: topColumns,\n\n      bottomRows: bottomRows,\n      bottomColumns: bottomColumns\n    };\n  }\n\n  invalidate() {\n    this._widthCache = {};\n    this._heightCache = {};\n    this._minColumn = null;\n    this._maxColumn = null;\n    this._minRow = null;\n    this._maxRow = null;\n  }\n}\n"]}